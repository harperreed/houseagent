<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.0.0 (20250921.2048)
 -->
<!-- Title: HouseAgent Pages: 1 -->
<svg width="3258pt" height="2260pt"
 viewBox="0.00 0.00 3258.00 2260.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2256.05)">
<title>HouseAgent</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-2256.05 3254,-2256.05 3254,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_external</title>
<polygon fill="#2d2d2d" stroke="#2d2d2d" points="1806,-454.8 1806,-2244.05 2182,-2244.05 2182,-454.8 1806,-454.8"/>
<text xml:space="preserve" text-anchor="middle" x="1994" y="-2226.75" font-family="Times,serif" font-size="14.00" fill="#00ff00">External Systems</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_ingestion</title>
<polygon fill="#2d2d2d" stroke="#2d2d2d" points="298,-1738.15 298,-1855.45 458,-1855.45 458,-1738.15 298,-1738.15"/>
<text xml:space="preserve" text-anchor="middle" x="378" y="-1838.15" font-family="Times,serif" font-size="14.00" fill="#00ff00">Data Ingestion Layer</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_processing</title>
<polygon fill="#2d2d2d" stroke="#2d2d2d" points="466,-1304.65 466,-1893.95 908,-1893.95 908,-1304.65 466,-1304.65"/>
<text xml:space="preserve" text-anchor="middle" x="687" y="-1876.65" font-family="Times,serif" font-size="14.00" fill="#00ff00">Processing Pipeline</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_validation</title>
<polygon fill="#3d3d3d" stroke="#3d3d3d" points="547,-1732.15 547,-1861.45 681,-1861.45 681,-1732.15 547,-1732.15"/>
<text xml:space="preserve" text-anchor="middle" x="614" y="-1844.15" font-family="Times,serif" font-size="14.00" fill="cyan">Validation</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_filtering</title>
<polygon fill="#3d3d3d" stroke="#3d3d3d" points="515,-1312.65 515,-1441.95 859,-1441.95 859,-1312.65 515,-1312.65"/>
<text xml:space="preserve" text-anchor="middle" x="687" y="-1424.65" font-family="Times,serif" font-size="14.00" fill="cyan">Filtering &amp; Detection</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_intelligence</title>
<polygon fill="#2d2d2d" stroke="#2d2d2d" points="916,-652.25 916,-1441.95 1545,-1441.95 1545,-652.25 916,-652.25"/>
<text xml:space="preserve" text-anchor="middle" x="1230.5" y="-1424.65" font-family="Times,serif" font-size="14.00" fill="#00ff00">Intelligence Layer</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_situation</title>
<polygon fill="#3d3d3d" stroke="#3d3d3d" points="924,-796.05 924,-937.35 1100,-937.35 1100,-796.05 924,-796.05"/>
<text xml:space="preserve" text-anchor="middle" x="1012" y="-920.05" font-family="Times,serif" font-size="14.00" fill="cyan">Situation Building</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_tools</title>
<polygon fill="#2d2d2d" stroke="#2d2d2d" points="1434,-233.35 1434,-578.1 1798,-578.1 1798,-233.35 1434,-233.35"/>
<text xml:space="preserve" text-anchor="middle" x="1616" y="-560.8" font-family="Times,serif" font-size="14.00" fill="#00ff00">Tool Framework</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_knowledge</title>
<polygon fill="#2d2d2d" stroke="#2d2d2d" points="758,-28.4 758,-597 1018,-597 1018,-28.4 758,-28.4"/>
<text xml:space="preserve" text-anchor="middle" x="888" y="-579.7" font-family="Times,serif" font-size="14.00" fill="#00ff00">Knowledge &amp; State</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_config</title>
<polygon fill="#2d2d2d" stroke="#2d2d2d" points="2488,-233.35 2488,-2095.5 2656,-2095.5 2656,-233.35 2488,-233.35"/>
<text xml:space="preserve" text-anchor="middle" x="2572" y="-2078.2" font-family="Times,serif" font-size="14.00" fill="#00ff00">Configuration</text>
</g>
<g id="clust11" class="cluster">
<title>cluster_dashboard</title>
<polygon fill="#2d2d2d" stroke="#2d2d2d" points="2258,-1160.45 2258,-1867.45 2480,-1867.45 2480,-1160.45 2258,-1160.45"/>
<text xml:space="preserve" text-anchor="middle" x="2369" y="-1850.15" font-family="Times,serif" font-size="14.00" fill="#00ff00">Web Dashboard</text>
</g>
<g id="clust12" class="cluster">
<title>cluster_output</title>
<polygon fill="#2d2d2d" stroke="#2d2d2d" points="80,-8 80,-1462.35 458,-1462.35 458,-8 80,-8"/>
<text xml:space="preserve" text-anchor="middle" x="269" y="-1445.05" font-family="Times,serif" font-size="14.00" fill="#00ff00">Output Layer</text>
</g>
<g id="clust13" class="cluster">
<title>cluster_legend</title>
<polygon fill="#1a1a1a" stroke="#1a1a1a" points="2224,-2156.75 2224,-2235.8 3242,-2235.8 3242,-2156.75 2224,-2156.75"/>
<text xml:space="preserve" text-anchor="middle" x="2733" y="-2220.4" font-family="Times,serif" font-size="12.00" fill="#00ff00">Legend</text>
</g>
<!-- mqtt_broker -->
<g id="node1" class="node">
<title>mqtt_broker</title>
<path fill="#4a4a4a" stroke="black" d="M1989.4,-2048.3C1989.4,-2051.94 1968.15,-2054.9 1942,-2054.9 1915.85,-2054.9 1894.6,-2051.94 1894.6,-2048.3 1894.6,-2048.3 1894.6,-1988.9 1894.6,-1988.9 1894.6,-1985.26 1915.85,-1982.3 1942,-1982.3 1968.15,-1982.3 1989.4,-1985.26 1989.4,-1988.9 1989.4,-1988.9 1989.4,-2048.3 1989.4,-2048.3"/>
<path fill="none" stroke="black" d="M1989.4,-2048.3C1989.4,-2044.66 1968.15,-2041.7 1942,-2041.7 1915.85,-2041.7 1894.6,-2044.66 1894.6,-2048.3"/>
<text xml:space="preserve" text-anchor="middle" x="1942" y="-2020.15" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">MQTT Broker</text>
<text xml:space="preserve" text-anchor="middle" x="1942" y="-2008.15" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">(Mosquitto)</text>
</g>
<!-- collector -->
<g id="node8" class="node">
<title>collector</title>
<polygon fill="#3cb371" stroke="black" points="449.77,-1822.95 306.23,-1822.95 306.23,-1746.15 449.77,-1746.15 449.77,-1822.95"/>
<text xml:space="preserve" text-anchor="middle" x="378" y="-1798.1" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">Collector</text>
<text xml:space="preserve" text-anchor="middle" x="378" y="-1786.1" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">collector.py</text>
<text xml:space="preserve" text-anchor="middle" x="378" y="-1774.1" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Dual topic subscription</text>
<text xml:space="preserve" text-anchor="middle" x="378" y="-1762.1" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Legacy + hierarchical</text>
</g>
<!-- mqtt_broker&#45;&gt;collector -->
<g id="edge3" class="edge">
<title>mqtt_broker&#45;&gt;collector</title>
<path fill="none" stroke="#00ff00" stroke-width="2" d="M1894.31,-2013.42C1648.19,-1991.82 533,-1893.95 533,-1893.95 533,-1893.95 485.02,-1860.4 442.45,-1830.62"/>
<polygon fill="#00ff00" stroke="#00ff00" stroke-width="2" points="444.46,-1827.76 434.26,-1824.89 440.45,-1833.49 444.46,-1827.76"/>
<text xml:space="preserve" text-anchor="middle" x="998.09" y="-1922.65" font-family="Helvetica,sans-Serif" font-size="9.00">subscribe</text>
<text xml:space="preserve" text-anchor="middle" x="998.09" y="-1912.9" font-family="Helvetica,sans-Serif" font-size="9.00">office/+/+/+/+/+</text>
<text xml:space="preserve" text-anchor="middle" x="998.09" y="-1903.15" font-family="Helvetica,sans-Serif" font-size="9.00">hassevents/notifications</text>
</g>
<!-- web_dashboard -->
<g id="node26" class="node">
<title>web_dashboard</title>
<polygon fill="#00ced1" stroke="black" points="2444.4,-1834.95 2265.6,-1834.95 2265.6,-1734.15 2444.4,-1734.15 2444.4,-1834.95"/>
<text xml:space="preserve" text-anchor="middle" x="2355" y="-1810.1" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">Flask Dashboard</text>
<text xml:space="preserve" text-anchor="middle" x="2355" y="-1798.1" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">web_dashboard.py</text>
<text xml:space="preserve" text-anchor="middle" x="2355" y="-1786.1" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Server&#45;Sent Events (SSE)</text>
<text xml:space="preserve" text-anchor="middle" x="2355" y="-1774.1" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Real&#45;time message streaming</text>
<text xml:space="preserve" text-anchor="middle" x="2355" y="-1762.1" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Camera panel</text>
<text xml:space="preserve" text-anchor="middle" x="2355" y="-1750.1" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Port 5001</text>
</g>
<!-- mqtt_broker&#45;&gt;web_dashboard -->
<g id="edge47" class="edge">
<title>mqtt_broker&#45;&gt;web_dashboard</title>
<path fill="none" stroke="#00ced1" d="M1989.56,-1999.22C2078.7,-1964.78 2262,-1893.95 2262,-1893.95 2262,-1893.95 2282.88,-1869.62 2304.85,-1844.01"/>
<polygon fill="#00ced1" stroke="#00ced1" points="2307.47,-1846.33 2311.33,-1836.46 2302.16,-1841.77 2307.47,-1846.33"/>
<text xml:space="preserve" text-anchor="middle" x="2259.92" y="-1917.78" font-family="Helvetica,sans-Serif" font-size="9.00">subscribe</text>
<text xml:space="preserve" text-anchor="middle" x="2259.92" y="-1908.03" font-family="Helvetica,sans-Serif" font-size="9.00">all topics</text>
</g>
<!-- mqtt_broker&#45;&gt;web_dashboard -->
<g id="edge53" class="edge">
<title>mqtt_broker&#45;&gt;web_dashboard</title>
<path fill="none" stroke="#ff1493" d="M1989.62,-2002.75C2068.82,-1978.04 2219,-1931.2 2219,-1931.2 2219,-1931.2 2262,-1893.95 2262,-1893.95 2262,-1893.95 2282.88,-1869.62 2304.85,-1844.01"/>
<polygon fill="#ff1493" stroke="#ff1493" points="2307.47,-1846.33 2311.33,-1836.46 2302.16,-1841.77 2307.47,-1846.33"/>
<text xml:space="preserve" text-anchor="middle" x="2285.71" y="-1912.9" font-family="Helvetica,sans-Serif" font-size="9.00">camera updates</text>
</g>
<!-- office_sensors -->
<g id="node2" class="node">
<title>office_sensors</title>
<polygon fill="#1e90ff" stroke="black" points="2010.03,-2211.55 1817.97,-2211.55 1813.97,-2207.55 1813.97,-2158.75 2006.03,-2158.75 2010.03,-2162.75 2010.03,-2211.55"/>
<polyline fill="none" stroke="black" points="2006.03,-2207.55 1813.97,-2207.55"/>
<polyline fill="none" stroke="black" points="2006.03,-2207.55 2006.03,-2158.75"/>
<polyline fill="none" stroke="black" points="2006.03,-2207.55 2010.03,-2211.55"/>
<text xml:space="preserve" text-anchor="middle" x="1912" y="-2186.7" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">Office Sensors</text>
<text xml:space="preserve" text-anchor="middle" x="1912" y="-2174.7" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">office/{site}/{floor}/{zone}/{type}/{id}</text>
</g>
<!-- office_sensors&#45;&gt;mqtt_broker -->
<g id="edge1" class="edge">
<title>office_sensors&#45;&gt;mqtt_broker</title>
<path fill="none" stroke="#1e90ff" d="M1916.69,-2158.44C1921.17,-2133.83 1928.04,-2096.14 1933.5,-2066.24"/>
<polygon fill="#1e90ff" stroke="#1e90ff" points="1936.89,-2067.16 1935.24,-2056.69 1930,-2065.9 1936.89,-2067.16"/>
<text xml:space="preserve" text-anchor="middle" x="1941.1" y="-2107.2" font-family="Helvetica,sans-Serif" font-size="9.00">publish</text>
</g>
<!-- hass_sensors -->
<g id="node3" class="node">
<title>hass_sensors</title>
<polygon fill="#1e90ff" stroke="black" points="2174.03,-2211.55 2071.97,-2211.55 2067.97,-2207.55 2067.97,-2158.75 2170.03,-2158.75 2174.03,-2162.75 2174.03,-2211.55"/>
<polyline fill="none" stroke="black" points="2170.03,-2207.55 2067.97,-2207.55"/>
<polyline fill="none" stroke="black" points="2170.03,-2207.55 2170.03,-2158.75"/>
<polyline fill="none" stroke="black" points="2170.03,-2207.55 2174.03,-2211.55"/>
<text xml:space="preserve" text-anchor="middle" x="2121" y="-2186.7" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">Home Assistant</text>
<text xml:space="preserve" text-anchor="middle" x="2121" y="-2174.7" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">Legacy Sensors</text>
</g>
<!-- hass_sensors&#45;&gt;mqtt_broker -->
<g id="edge2" class="edge">
<title>hass_sensors&#45;&gt;mqtt_broker</title>
<path fill="none" stroke="#1e90ff" d="M2093.03,-2158.44C2064.75,-2132.44 2020.58,-2091.84 1987.3,-2061.24"/>
<polygon fill="#1e90ff" stroke="#1e90ff" points="1989.93,-2058.91 1980.2,-2054.72 1985.2,-2064.06 1989.93,-2058.91"/>
<text xml:space="preserve" text-anchor="middle" x="2057.22" y="-2107.2" font-family="Helvetica,sans-Serif" font-size="9.00">publish</text>
</g>
<!-- cameras -->
<g id="node4" class="node">
<title>cameras</title>
<polygon fill="#ff1493" stroke="black" points="1919.65,-521.6 1818.35,-521.6 1814.35,-517.6 1814.35,-468.8 1915.65,-468.8 1919.65,-472.8 1919.65,-521.6"/>
<polyline fill="none" stroke="black" points="1915.65,-517.6 1814.35,-517.6"/>
<polyline fill="none" stroke="black" points="1915.65,-517.6 1915.65,-468.8"/>
<polyline fill="none" stroke="black" points="1915.65,-517.6 1919.65,-521.6"/>
<text xml:space="preserve" text-anchor="middle" x="1867" y="-496.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">RTSP Cameras</text>
<text xml:space="preserve" text-anchor="middle" x="1867" y="-484.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">(7 cameras)</text>
</g>
<!-- camera_tool -->
<g id="node19" class="node">
<title>camera_tool</title>
<polygon fill="#ff1493" stroke="black" points="1790.15,-330.15 1639.85,-330.15 1639.85,-241.35 1790.15,-241.35 1790.15,-330.15"/>
<text xml:space="preserve" text-anchor="middle" x="1715" y="-305.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">CameraTool</text>
<text xml:space="preserve" text-anchor="middle" x="1715" y="-293.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">tools/camera_tool.py</text>
<text xml:space="preserve" text-anchor="middle" x="1715" y="-281.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• RTSP snapshot capture</text>
<text xml:space="preserve" text-anchor="middle" x="1715" y="-269.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• GPT&#45;5 Vision analysis</text>
<text xml:space="preserve" text-anchor="middle" x="1715" y="-257.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Zone/camera lookup</text>
</g>
<!-- cameras&#45;&gt;camera_tool -->
<g id="edge31" class="edge">
<title>cameras&#45;&gt;camera_tool</title>
<path fill="none" stroke="#ff1493" stroke-dasharray="5,2" d="M1848.06,-468.35C1824.53,-436.23 1783.81,-380.66 1753.6,-339.42"/>
<polygon fill="#ff1493" stroke="#ff1493" points="1756.56,-337.55 1747.83,-331.55 1750.91,-341.69 1756.56,-337.55"/>
<text xml:space="preserve" text-anchor="middle" x="1813.4" y="-374.35" font-family="Helvetica,sans-Serif" font-size="9.00">JPEG snapshot</text>
</g>
<!-- openai_gpt5_mini -->
<g id="node5" class="node">
<title>openai_gpt5_mini</title>
<polygon fill="#ff6b6b" stroke="black" points="1899.9,-1397.45 1814.1,-1397.45 1814.1,-1393.45 1810.1,-1393.45 1810.1,-1389.45 1814.1,-1389.45 1814.1,-1340.65 1810.1,-1340.65 1810.1,-1336.65 1814.1,-1336.65 1814.1,-1332.65 1899.9,-1332.65 1899.9,-1397.45"/>
<polyline fill="none" stroke="black" points="1814.1,-1393.45 1818.1,-1393.45 1818.1,-1389.45 1814.1,-1389.45"/>
<polyline fill="none" stroke="black" points="1814.1,-1340.65 1818.1,-1340.65 1818.1,-1336.65 1814.1,-1336.65"/>
<text xml:space="preserve" text-anchor="middle" x="1857" y="-1372.6" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">OpenAI API</text>
<text xml:space="preserve" text-anchor="middle" x="1857" y="-1360.6" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">GPT&#45;5&#45;mini</text>
<text xml:space="preserve" text-anchor="middle" x="1857" y="-1348.6" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">(Classifier)</text>
</g>
<!-- should_respond_filter -->
<g id="node15" class="node">
<title>should_respond_filter</title>
<polygon fill="#ff69b4" stroke="black" points="1373,-1125.45 1209.2,-1036.65 1373,-947.85 1536.8,-1036.65 1373,-1125.45"/>
<text xml:space="preserve" text-anchor="middle" x="1373" y="-1056.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">Should Respond Filter</text>
<text xml:space="preserve" text-anchor="middle" x="1373" y="-1044.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">HouseBot.should_respond()</text>
<text xml:space="preserve" text-anchor="middle" x="1373" y="-1032.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• GPT&#45;5&#45;mini decision gate</text>
<text xml:space="preserve" text-anchor="middle" x="1373" y="-1020.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• JSON structured output</text>
<text xml:space="preserve" text-anchor="middle" x="1373" y="-1008.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Spam prevention</text>
</g>
<!-- openai_gpt5_mini&#45;&gt;should_respond_filter -->
<g id="edge22" class="edge">
<title>openai_gpt5_mini&#45;&gt;should_respond_filter</title>
<path fill="none" stroke="#ff69b4" stroke-dasharray="5,2" d="M1813.93,-1337.65C1762.33,-1306.02 1682.75,-1257.25 1682.75,-1257.25 1682.75,-1257.25 1565,-1160.45 1565,-1160.45 1565,-1160.45 1508.7,-1124.44 1457.08,-1091.42"/>
<polygon fill="#ff69b4" stroke="#ff69b4" points="1459.09,-1088.56 1448.78,-1086.12 1455.32,-1094.46 1459.09,-1088.56"/>
<text xml:space="preserve" text-anchor="middle" x="1749.88" y="-1209.18" font-family="Helvetica,sans-Serif" font-size="9.00">JSON: {should_respond, reason}</text>
</g>
<!-- house_bot -->
<g id="node16" class="node">
<title>house_bot</title>
<polygon fill="#8b008b" stroke="black" points="1517.03,-761.05 1380.97,-761.05 1380.97,-660.25 1517.03,-660.25 1517.03,-761.05"/>
<text xml:space="preserve" text-anchor="middle" x="1449" y="-736.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">HouseBot</text>
<text xml:space="preserve" text-anchor="middle" x="1449" y="-724.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">house_bot.py</text>
<text xml:space="preserve" text-anchor="middle" x="1449" y="-712.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Multi&#45;model selection</text>
<text xml:space="preserve" text-anchor="middle" x="1449" y="-700.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Tool orchestration</text>
<text xml:space="preserve" text-anchor="middle" x="1449" y="-688.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Prompt injection</text>
<text xml:space="preserve" text-anchor="middle" x="1449" y="-676.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Emoji stripping</text>
</g>
<!-- openai_gpt5_mini&#45;&gt;house_bot -->
<g id="edge37" class="edge">
<title>openai_gpt5_mini&#45;&gt;house_bot</title>
<path fill="none" stroke="#ff6b6b" stroke-dasharray="5,2" d="M1842.16,-1332.24C1815.44,-1274.98 1762,-1160.45 1762,-1160.45 1762,-1160.45 1653,-1125.45 1653,-1125.45 1653,-1125.45 1566,-947.85 1566,-947.85 1566,-947.85 1519,-937.35 1519,-937.35 1519,-937.35 1488.55,-839.16 1467.81,-772.31"/>
<polygon fill="#ff6b6b" stroke="#ff6b6b" points="1471.2,-771.42 1464.9,-762.91 1464.52,-773.49 1471.2,-771.42"/>
<text xml:space="preserve" text-anchor="middle" x="1687.5" y="-1032.98" font-family="Helvetica,sans-Serif" font-size="9.00">routine response</text>
</g>
<!-- openai_gpt5 -->
<g id="node6" class="node">
<title>openai_gpt5</title>
<polygon fill="#ff0000" stroke="black" points="2035.9,-1069.05 1950.1,-1069.05 1950.1,-1065.05 1946.1,-1065.05 1946.1,-1061.05 1950.1,-1061.05 1950.1,-1012.25 1946.1,-1012.25 1946.1,-1008.25 1950.1,-1008.25 1950.1,-1004.25 2035.9,-1004.25 2035.9,-1069.05"/>
<polyline fill="none" stroke="black" points="1950.1,-1065.05 1954.1,-1065.05 1954.1,-1061.05 1950.1,-1061.05"/>
<polyline fill="none" stroke="black" points="1950.1,-1012.25 1954.1,-1012.25 1954.1,-1008.25 1950.1,-1008.25"/>
<text xml:space="preserve" text-anchor="middle" x="1993" y="-1044.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">OpenAI API</text>
<text xml:space="preserve" text-anchor="middle" x="1993" y="-1032.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">GPT&#45;5</text>
<text xml:space="preserve" text-anchor="middle" x="1993" y="-1020.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">(Synthesis)</text>
</g>
<!-- openai_gpt5&#45;&gt;house_bot -->
<g id="edge38" class="edge">
<title>openai_gpt5&#45;&gt;house_bot</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1961.59,-1003.95C1936.67,-978.8 1906,-947.85 1906,-947.85 1906,-947.85 1658,-819.67 1527.38,-752.16"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1529.25,-749.19 1518.76,-747.71 1526.04,-755.41 1529.25,-749.19"/>
<text xml:space="preserve" text-anchor="middle" x="1918.76" y="-855.65" font-family="Helvetica,sans-Serif" font-size="9.00">witty response</text>
<text xml:space="preserve" text-anchor="middle" x="1918.76" y="-845.9" font-family="Helvetica,sans-Serif" font-size="9.00">+ structured JSON</text>
</g>
<!-- openai_vision -->
<g id="node7" class="node">
<title>openai_vision</title>
<polygon fill="#ff1493" stroke="black" points="2124.65,-527.6 2007.35,-527.6 2007.35,-523.6 2003.35,-523.6 2003.35,-519.6 2007.35,-519.6 2007.35,-470.8 2003.35,-470.8 2003.35,-466.8 2007.35,-466.8 2007.35,-462.8 2124.65,-462.8 2124.65,-527.6"/>
<polyline fill="none" stroke="black" points="2007.35,-523.6 2011.35,-523.6 2011.35,-519.6 2007.35,-519.6"/>
<polyline fill="none" stroke="black" points="2007.35,-470.8 2011.35,-470.8 2011.35,-466.8 2007.35,-466.8"/>
<text xml:space="preserve" text-anchor="middle" x="2066" y="-502.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">OpenAI API</text>
<text xml:space="preserve" text-anchor="middle" x="2066" y="-490.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">GPT&#45;5 Vision</text>
<text xml:space="preserve" text-anchor="middle" x="2066" y="-478.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">(Camera Analysis)</text>
</g>
<!-- openai_vision&#45;&gt;camera_tool -->
<g id="edge33" class="edge">
<title>openai_vision&#45;&gt;camera_tool</title>
<path fill="none" stroke="#ff1493" stroke-dasharray="5,2" d="M2057.07,-462.4C2046.99,-426.53 2032,-373.15 2032,-373.15 2032,-373.15 1895.33,-335.9 1801.46,-310.32"/>
<polygon fill="#ff1493" stroke="#ff1493" points="1802.56,-306.99 1791.99,-307.73 1800.71,-313.74 1802.56,-306.99"/>
<text xml:space="preserve" text-anchor="middle" x="2059.46" y="-374.35" font-family="Helvetica,sans-Serif" font-size="9.00">analysis text</text>
</g>
<!-- message_batcher -->
<g id="node10" class="node">
<title>message_batcher</title>
<polygon fill="#ff8c00" stroke="black" points="695.02,-1626.4 558.98,-1626.4 558.98,-1537.6 695.02,-1537.6 695.02,-1626.4"/>
<text xml:space="preserve" text-anchor="middle" x="627" y="-1601.55" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">MessageBatcher</text>
<text xml:space="preserve" text-anchor="middle" x="627" y="-1589.55" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">message_batcher.py</text>
<text xml:space="preserve" text-anchor="middle" x="627" y="-1577.55" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Time&#45;based batching</text>
<text xml:space="preserve" text-anchor="middle" x="627" y="-1565.55" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Validation pipeline</text>
<text xml:space="preserve" text-anchor="middle" x="627" y="-1553.55" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Filter coordination</text>
</g>
<!-- collector&#45;&gt;message_batcher -->
<g id="edge4" class="edge">
<title>collector&#45;&gt;message_batcher</title>
<path fill="none" stroke="#3cb371" stroke-width="2" d="M418.19,-1745.8C449.16,-1716.7 486.75,-1681.4 486.75,-1681.4 486.75,-1681.4 519.98,-1658.09 554.09,-1634.15"/>
<polygon fill="#3cb371" stroke="#3cb371" stroke-width="2" points="556.01,-1637.08 562.19,-1628.47 551.99,-1631.35 556.01,-1637.08"/>
<text xml:space="preserve" text-anchor="middle" x="516.38" y="-1682.6" font-family="Helvetica,sans-Serif" font-size="9.00">raw messages</text>
</g>
<!-- schemas -->
<g id="node9" class="node">
<title>schemas</title>
<polygon fill="#4169e1" stroke="black" points="673.02,-1828.95 554.98,-1828.95 554.98,-1740.15 673.02,-1740.15 673.02,-1828.95"/>
<text xml:space="preserve" text-anchor="middle" x="614" y="-1804.1" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">Pydantic Schemas</text>
<text xml:space="preserve" text-anchor="middle" x="614" y="-1792.1" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">schemas.py</text>
<text xml:space="preserve" text-anchor="middle" x="614" y="-1780.1" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• SensorMessage</text>
<text xml:space="preserve" text-anchor="middle" x="614" y="-1768.1" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• LegacyMessage</text>
<text xml:space="preserve" text-anchor="middle" x="614" y="-1756.1" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Auto&#45;conversion</text>
</g>
<!-- schemas&#45;&gt;message_batcher -->
<g id="edge6" class="edge">
<title>schemas&#45;&gt;message_batcher</title>
<path fill="none" stroke="#4169e1" stroke-dasharray="5,2" d="M588.54,-1739.79C574.65,-1715.9 560.25,-1691.15 560.25,-1691.15 560.25,-1691.15 560.25,-1681.4 560.25,-1681.4 560.25,-1681.4 575.26,-1659.28 591.04,-1636.01"/>
<polygon fill="#4169e1" stroke="#4169e1" points="593.77,-1638.23 596.48,-1627.99 587.97,-1634.3 593.77,-1638.23"/>
<text xml:space="preserve" text-anchor="middle" x="593.62" y="-1682.6" font-family="Helvetica,sans-Serif" font-size="9.00">SensorMessage</text>
</g>
<!-- message_batcher&#45;&gt;schemas -->
<g id="edge5" class="edge">
<title>message_batcher&#45;&gt;schemas</title>
<path fill="none" stroke="#4169e1" d="M633.22,-1626.73C636.96,-1653.01 641,-1681.4 641,-1681.4 641,-1681.4 641,-1691.15 641,-1691.15 641,-1691.15 635.8,-1708.94 629.97,-1728.9"/>
<polygon fill="#4169e1" stroke="#4169e1" points="626.66,-1727.75 627.21,-1738.33 633.38,-1729.72 626.66,-1727.75"/>
<text xml:space="preserve" text-anchor="middle" x="657.12" y="-1682.6" font-family="Helvetica,sans-Serif" font-size="9.00">validate</text>
</g>
<!-- noise_filter -->
<g id="node11" class="node">
<title>noise_filter</title>
<polygon fill="#ffd700" stroke="black" points="851.02,-1409.45 708.98,-1409.45 708.98,-1320.65 851.02,-1320.65 851.02,-1409.45"/>
<text xml:space="preserve" text-anchor="middle" x="780" y="-1384.6" font-family="Helvetica,sans-Serif" font-size="11.00">NoiseFilter</text>
<text xml:space="preserve" text-anchor="middle" x="780" y="-1372.6" font-family="Helvetica,sans-Serif" font-size="11.00">noise_filter.py</text>
<text xml:space="preserve" text-anchor="middle" x="780" y="-1360.6" font-family="Helvetica,sans-Serif" font-size="11.00">• Deduplication</text>
<text xml:space="preserve" text-anchor="middle" x="780" y="-1348.6" font-family="Helvetica,sans-Serif" font-size="11.00">• Quality gates</text>
<text xml:space="preserve" text-anchor="middle" x="780" y="-1336.6" font-family="Helvetica,sans-Serif" font-size="11.00">• Time&#45;of&#45;day sensitivity</text>
</g>
<!-- message_batcher&#45;&gt;noise_filter -->
<g id="edge7" class="edge">
<title>message_batcher&#45;&gt;noise_filter</title>
<path fill="none" stroke="#ffd700" d="M695.31,-1545.06C748.72,-1516.95 814,-1482.6 814,-1482.6 814,-1482.6 814,-1472.85 814,-1472.85 814,-1472.85 805.75,-1446.93 797.37,-1420.62"/>
<polygon fill="#ffd700" stroke="#ffd700" points="800.75,-1419.71 794.39,-1411.24 794.08,-1421.83 800.75,-1419.71"/>
<text xml:space="preserve" text-anchor="middle" x="826" y="-1474.05" font-family="Helvetica,sans-Serif" font-size="9.00">check</text>
</g>
<!-- anomaly_detector -->
<g id="node12" class="node">
<title>anomaly_detector</title>
<polygon fill="#ff6347" stroke="black" points="650.9,-1409.45 523.1,-1409.45 523.1,-1320.65 650.9,-1320.65 650.9,-1409.45"/>
<text xml:space="preserve" text-anchor="middle" x="587" y="-1384.6" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">AnomalyDetector</text>
<text xml:space="preserve" text-anchor="middle" x="587" y="-1372.6" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">anomaly_detector.py</text>
<text xml:space="preserve" text-anchor="middle" x="587" y="-1360.6" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Z&#45;score detection</text>
<text xml:space="preserve" text-anchor="middle" x="587" y="-1348.6" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• EWMA statistics</text>
<text xml:space="preserve" text-anchor="middle" x="587" y="-1336.6" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Outlier scoring</text>
</g>
<!-- message_batcher&#45;&gt;anomaly_detector -->
<g id="edge9" class="edge">
<title>message_batcher&#45;&gt;anomaly_detector</title>
<path fill="none" stroke="#ff6347" d="M580.67,-1537.27C552.82,-1510.99 522.75,-1482.6 522.75,-1482.6 522.75,-1482.6 522.75,-1472.85 522.75,-1472.85 522.75,-1472.85 538.76,-1446.23 554.8,-1419.57"/>
<polygon fill="#ff6347" stroke="#ff6347" points="557.75,-1421.47 559.9,-1411.09 551.75,-1417.86 557.75,-1421.47"/>
<text xml:space="preserve" text-anchor="middle" x="538.88" y="-1474.05" font-family="Helvetica,sans-Serif" font-size="9.00">analyze</text>
</g>
<!-- agent_listener -->
<g id="node13" class="node">
<title>agent_listener</title>
<polygon fill="#9370db" stroke="black" points="1066.4,-1409.45 923.6,-1409.45 923.6,-1320.65 1066.4,-1320.65 1066.4,-1409.45"/>
<text xml:space="preserve" text-anchor="middle" x="995" y="-1384.6" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">AgentListener</text>
<text xml:space="preserve" text-anchor="middle" x="995" y="-1372.6" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">agent_listener.py</text>
<text xml:space="preserve" text-anchor="middle" x="995" y="-1360.6" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Situation orchestration</text>
<text xml:space="preserve" text-anchor="middle" x="995" y="-1348.6" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• History management</text>
<text xml:space="preserve" text-anchor="middle" x="995" y="-1336.6" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Semantic context</text>
</g>
<!-- message_batcher&#45;&gt;agent_listener -->
<g id="edge11" class="edge">
<title>message_batcher&#45;&gt;agent_listener</title>
<path fill="none" stroke="#ff8c00" stroke-width="2" d="M695.42,-1551.08C761.62,-1522.13 852,-1482.6 852,-1482.6 852,-1482.6 893.45,-1448.82 931.71,-1417.63"/>
<polygon fill="#ff8c00" stroke="#ff8c00" stroke-width="2" points="933.46,-1420.72 939,-1411.69 929.04,-1415.3 933.46,-1420.72"/>
<text xml:space="preserve" text-anchor="middle" x="892.94" y="-1474.05" font-family="Helvetica,sans-Serif" font-size="9.00">validated batch</text>
</g>
<!-- bundle_topic -->
<g id="node30" class="node">
<title>bundle_topic</title>
<polygon fill="#00ffff" stroke="black" points="450.48,-1429.85 161.78,-1429.85 87.52,-1300.25 376.22,-1300.25 450.48,-1429.85"/>
<text xml:space="preserve" text-anchor="middle" x="269" y="-1372.6" font-family="Helvetica,sans-Serif" font-size="11.00">MQTT Topic</text>
<text xml:space="preserve" text-anchor="middle" x="269" y="-1360.6" font-family="Helvetica,sans-Serif" font-size="11.00">MESSAGE_BUNDLE_TOPIC</text>
<text xml:space="preserve" text-anchor="middle" x="269" y="-1348.6" font-family="Helvetica,sans-Serif" font-size="11.00">(Situation bundles)</text>
</g>
<!-- message_batcher&#45;&gt;bundle_topic -->
<g id="edge46" class="edge">
<title>message_batcher&#45;&gt;bundle_topic</title>
<path fill="none" stroke="#00ffff" d="M558.72,-1542.11C510.44,-1514.61 454.25,-1482.6 454.25,-1482.6 454.25,-1482.6 419.8,-1460.92 380.61,-1436.27"/>
<polygon fill="#00ffff" stroke="#00ffff" points="382.72,-1433.46 372.39,-1431.1 378.99,-1439.38 382.72,-1433.46"/>
<text xml:space="preserve" text-anchor="middle" x="481.62" y="-1474.05" font-family="Helvetica,sans-Serif" font-size="9.00">publish batch</text>
</g>
<!-- noise_filter&#45;&gt;message_batcher -->
<g id="edge8" class="edge">
<title>noise_filter&#45;&gt;message_batcher</title>
<path fill="none" stroke="#ffd700" stroke-dasharray="5,2" d="M748.9,-1409.75C724.5,-1444.02 690.46,-1491.85 664.55,-1528.25"/>
<polygon fill="#ffd700" stroke="#ffd700" points="661.97,-1525.83 659.02,-1536.01 667.67,-1529.89 661.97,-1525.83"/>
<text xml:space="preserve" text-anchor="middle" x="733.5" y="-1474.05" font-family="Helvetica,sans-Serif" font-size="9.00">keep/suppress</text>
</g>
<!-- anomaly_detector&#45;&gt;message_batcher -->
<g id="edge10" class="edge">
<title>anomaly_detector&#45;&gt;message_batcher</title>
<path fill="none" stroke="#ff6347" stroke-dasharray="5,2" d="M595.13,-1409.75C601.4,-1443.44 610.11,-1490.23 616.84,-1526.39"/>
<polygon fill="#ff6347" stroke="#ff6347" points="613.31,-1526.56 618.58,-1535.75 620.19,-1525.28 613.31,-1526.56"/>
<text xml:space="preserve" text-anchor="middle" x="639.7" y="-1474.05" font-family="Helvetica,sans-Serif" font-size="9.00">anomaly_score</text>
</g>
<!-- situation_builder -->
<g id="node14" class="node">
<title>situation_builder</title>
<polygon fill="#20b2aa" stroke="black" points="1092.4,-904.85 931.6,-904.85 931.6,-804.05 1092.4,-804.05 1092.4,-904.85"/>
<text xml:space="preserve" text-anchor="middle" x="1012" y="-880" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">SituationBuilder</text>
<text xml:space="preserve" text-anchor="middle" x="1012" y="-868" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">situation_builder.py</text>
<text xml:space="preserve" text-anchor="middle" x="1012" y="-856" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Zone clustering</text>
<text xml:space="preserve" text-anchor="middle" x="1012" y="-844" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Multi&#45;sensor corroboration</text>
<text xml:space="preserve" text-anchor="middle" x="1012" y="-832" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Confidence scoring</text>
<text xml:space="preserve" text-anchor="middle" x="1012" y="-820" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• ULID generation</text>
</g>
<!-- agent_listener&#45;&gt;situation_builder -->
<g id="edge12" class="edge">
<title>agent_listener&#45;&gt;situation_builder</title>
<path fill="none" stroke="#20b2aa" d="M990.41,-1320.29C983.2,-1251.41 970,-1125.45 970,-1125.45 970,-1125.45 970,-947.85 970,-947.85 970,-947.85 976.74,-933.03 984.81,-915.27"/>
<polygon fill="#20b2aa" stroke="#20b2aa" points="987.82,-917.1 988.78,-906.54 981.45,-914.2 987.82,-917.1"/>
<text xml:space="preserve" text-anchor="middle" x="1012.07" y="-1209.18" font-family="Helvetica,sans-Serif" font-size="9.00">build situation</text>
</g>
<!-- agent_listener&#45;&gt;should_respond_filter -->
<g id="edge20" class="edge">
<title>agent_listener&#45;&gt;should_respond_filter</title>
<path fill="none" stroke="#9370db" stroke-width="2" d="M1066.78,-1324.74C1122.38,-1294.28 1190,-1257.25 1190,-1257.25 1190,-1257.25 1260.88,-1172.19 1314.41,-1107.95"/>
<polygon fill="#9370db" stroke="#9370db" stroke-width="2" points="1316.86,-1110.49 1320.57,-1100.56 1311.48,-1106.01 1316.86,-1110.49"/>
<text xml:space="preserve" text-anchor="middle" x="1299.04" y="-1209.18" font-family="Helvetica,sans-Serif" font-size="9.00">situation_json</text>
</g>
<!-- semantic_memory -->
<g id="node21" class="node">
<title>semantic_memory</title>
<path fill="#4682b4" stroke="black" d="M909.77,-551.9C909.77,-558.85 877.6,-564.5 838,-564.5 798.4,-564.5 766.23,-558.85 766.23,-551.9 766.23,-551.9 766.23,-438.5 766.23,-438.5 766.23,-431.55 798.4,-425.9 838,-425.9 877.6,-425.9 909.77,-431.55 909.77,-438.5 909.77,-438.5 909.77,-551.9 909.77,-551.9"/>
<path fill="none" stroke="black" d="M909.77,-551.9C909.77,-544.95 877.6,-539.3 838,-539.3 798.4,-539.3 766.23,-544.95 766.23,-551.9"/>
<text xml:space="preserve" text-anchor="middle" x="838" y="-520.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">SemanticMemory</text>
<text xml:space="preserve" text-anchor="middle" x="838" y="-508.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">semantic_memory.py</text>
<text xml:space="preserve" text-anchor="middle" x="838" y="-496.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Embedding storage</text>
<text xml:space="preserve" text-anchor="middle" x="838" y="-484.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• ChromaDB integration</text>
<text xml:space="preserve" text-anchor="middle" x="838" y="-472.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Temporal windowing</text>
<text xml:space="preserve" text-anchor="middle" x="838" y="-460.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Spatial metadata</text>
</g>
<!-- agent_listener&#45;&gt;semantic_memory -->
<g id="edge16" class="edge">
<title>agent_listener&#45;&gt;semantic_memory</title>
<path fill="none" stroke="#4682b4" d="M923.14,-1326.25C864.75,-1295.52 792,-1257.25 792,-1257.25 792,-1257.25 671,-1125.45 671,-1125.45 671,-1125.45 671,-947.85 671,-947.85 671,-947.85 706.75,-796.05 706.75,-796.05 706.75,-796.05 764.48,-664.17 803.36,-575.33"/>
<polygon fill="#4682b4" stroke="#4682b4" points="806.48,-576.94 807.28,-566.38 800.07,-574.14 806.48,-576.94"/>
<text xml:space="preserve" text-anchor="middle" x="736.38" y="-850.78" font-family="Helvetica,sans-Serif" font-size="9.00">search context</text>
</g>
<!-- agent_listener&#45;&gt;semantic_memory -->
<g id="edge54" class="edge">
<title>agent_listener&#45;&gt;semantic_memory</title>
<path fill="none" stroke="#9370db" stroke-dasharray="5,2" d="M978.68,-1320.29C952.98,-1251.41 906,-1125.45 906,-1125.45 906,-1125.45 850,-937.35 850,-937.35 850,-937.35 843.62,-702.92 840.17,-575.85"/>
<polygon fill="#9370db" stroke="#9370db" points="843.67,-576.06 839.9,-566.16 836.68,-576.25 843.67,-576.06"/>
<text xml:space="preserve" text-anchor="middle" x="880" y="-850.78" font-family="Helvetica,sans-Serif" font-size="9.00">store message</text>
</g>
<!-- notification_topic -->
<g id="node29" class="node">
<title>notification_topic</title>
<polygon fill="#00ff00" stroke="black" points="450.38,-1101.45 211.16,-1101.45 149.62,-971.85 388.84,-971.85 450.38,-1101.45"/>
<text xml:space="preserve" text-anchor="middle" x="300" y="-1044.2" font-family="Helvetica,sans-Serif" font-size="11.00">MQTT Topic</text>
<text xml:space="preserve" text-anchor="middle" x="300" y="-1032.2" font-family="Helvetica,sans-Serif" font-size="11.00">NOTIFICATION_TOPIC</text>
<text xml:space="preserve" text-anchor="middle" x="300" y="-1020.2" font-family="Helvetica,sans-Serif" font-size="11.00">(AI responses)</text>
</g>
<!-- agent_listener&#45;&gt;notification_topic -->
<g id="edge45" class="edge">
<title>agent_listener&#45;&gt;notification_topic</title>
<path fill="none" stroke="#00ff00" stroke-width="2" d="M923.33,-1326.57C896.77,-1312.68 873,-1300.25 873,-1300.25 873,-1300.25 600.5,-1257.25 600.5,-1257.25 600.5,-1257.25 485.69,-1173.35 398,-1109.27"/>
<polygon fill="#00ff00" stroke="#00ff00" stroke-width="2" points="400.31,-1106.62 390.17,-1103.54 396.18,-1112.27 400.31,-1106.62"/>
<text xml:space="preserve" text-anchor="middle" x="635.75" y="-1209.18" font-family="Helvetica,sans-Serif" font-size="9.00">publish response</text>
</g>
<!-- situation_builder&#45;&gt;agent_listener -->
<g id="edge15" class="edge">
<title>situation_builder&#45;&gt;agent_listener</title>
<path fill="none" stroke="#20b2aa" stroke-dasharray="5,2" d="M1015.32,-905.29C1020.52,-983.3 1030,-1125.45 1030,-1125.45 1030,-1125.45 1040,-1160.45 1040,-1160.45 1040,-1160.45 1040,-1257.25 1040,-1257.25 1040,-1257.25 1028.98,-1283.4 1017.85,-1309.83"/>
<polygon fill="#20b2aa" stroke="#20b2aa" points="1014.68,-1308.33 1014.02,-1318.91 1021.13,-1311.05 1014.68,-1308.33"/>
<text xml:space="preserve" text-anchor="middle" x="1080.12" y="-1214.05" font-family="Helvetica,sans-Serif" font-size="9.00">Situation object</text>
<text xml:space="preserve" text-anchor="middle" x="1080.12" y="-1204.3" font-family="Helvetica,sans-Serif" font-size="9.00">(confidence, zones)</text>
</g>
<!-- floor_plan -->
<g id="node20" class="node">
<title>floor_plan</title>
<polygon fill="#daa520" stroke="black" points="1009.77,-125.2 1006.77,-129.2 985.77,-129.2 982.77,-125.2 860.23,-125.2 860.23,-36.4 1009.77,-36.4 1009.77,-125.2"/>
<text xml:space="preserve" text-anchor="middle" x="935" y="-100.35" font-family="Helvetica,sans-Serif" font-size="11.00">FloorPlanModel</text>
<text xml:space="preserve" text-anchor="middle" x="935" y="-88.35" font-family="Helvetica,sans-Serif" font-size="11.00">floor_plan.py</text>
<text xml:space="preserve" text-anchor="middle" x="935" y="-76.35" font-family="Helvetica,sans-Serif" font-size="11.00">• Zone definitions</text>
<text xml:space="preserve" text-anchor="middle" x="935" y="-64.35" font-family="Helvetica,sans-Serif" font-size="11.00">• Adjacency graph</text>
<text xml:space="preserve" text-anchor="middle" x="935" y="-52.35" font-family="Helvetica,sans-Serif" font-size="11.00">• Camera FOV mappings</text>
</g>
<!-- situation_builder&#45;&gt;floor_plan -->
<g id="edge13" class="edge">
<title>situation_builder&#45;&gt;floor_plan</title>
<path fill="none" stroke="#daa520" d="M1018.84,-803.71C1028.5,-733.39 1045,-613.38 1045,-613.38 119,-8 119,-8 1045,-284.75 1045,-284.75 1011,-188.6 1011,-188.6 1011,-188.6 991.72,-161.51 972.59,-134.62"/>
<polygon fill="#daa520" stroke="#daa520" points="975.66,-132.9 967.01,-126.78 969.96,-136.96 975.66,-132.9"/>
<text xml:space="preserve" text-anchor="middle" x="1070.12" y="-491.52" font-family="Helvetica,sans-Serif" font-size="9.00">zone lookup</text>
</g>
<!-- should_respond_filter&#45;&gt;openai_gpt5_mini -->
<g id="edge21" class="edge">
<title>should_respond_filter&#45;&gt;openai_gpt5_mini</title>
<path fill="none" stroke="#ff69b4" d="M1445.53,-1086.66C1541.32,-1151.38 1698,-1257.25 1698,-1257.25 1698,-1257.25 1758.29,-1297.75 1804.62,-1328.87"/>
<polygon fill="#ff69b4" stroke="#ff69b4" points="1802.46,-1331.63 1812.72,-1334.3 1806.37,-1325.82 1802.46,-1331.63"/>
<text xml:space="preserve" text-anchor="middle" x="1725" y="-1209.18" font-family="Helvetica,sans-Serif" font-size="9.00">filter decision</text>
</g>
<!-- should_respond_filter&#45;&gt;agent_listener -->
<g id="edge24" class="edge">
<title>should_respond_filter&#45;&gt;agent_listener</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="1,5" d="M1351.14,-1113.84C1332.95,-1177.26 1310,-1257.25 1310,-1257.25 1310,-1257.25 1171.06,-1304.36 1077.73,-1336"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1076.65,-1332.67 1068.31,-1339.2 1078.9,-1339.3 1076.65,-1332.67"/>
<text xml:space="preserve" text-anchor="middle" x="1375.23" y="-1209.18" font-family="Helvetica,sans-Serif" font-size="9.00">NO: skip response</text>
</g>
<!-- should_respond_filter&#45;&gt;house_bot -->
<g id="edge23" class="edge">
<title>should_respond_filter&#45;&gt;house_bot</title>
<path fill="none" stroke="#00ff00" stroke-width="2" d="M1353.77,-957.72C1350.83,-945.79 1348.75,-937.35 1348.75,-937.35 1348.75,-937.35 1348.75,-796.05 1348.75,-796.05 1348.75,-796.05 1362.53,-784.45 1379.88,-769.84"/>
<polygon fill="#00ff00" stroke="#00ff00" stroke-width="2" points="1382.1,-772.55 1387.5,-763.43 1377.59,-767.19 1382.1,-772.55"/>
<text xml:space="preserve" text-anchor="middle" x="1376.88" y="-850.78" font-family="Helvetica,sans-Serif" font-size="9.00">YES: proceed</text>
</g>
<!-- house_bot&#45;&gt;openai_gpt5_mini -->
<g id="edge35" class="edge">
<title>house_bot&#45;&gt;openai_gpt5_mini</title>
<path fill="none" stroke="#ff6b6b" d="M1484.31,-761.46C1531.43,-827.93 1609,-937.35 1609,-937.35 1609,-937.35 1736,-947.85 1736,-947.85 1736,-947.85 1827,-1160.45 1827,-1160.45 1827,-1160.45 1841.83,-1261.11 1850.64,-1320.87"/>
<polygon fill="#ff6b6b" stroke="#ff6b6b" points="1847.17,-1321.36 1852.09,-1330.74 1854.1,-1320.34 1847.17,-1321.36"/>
<text xml:space="preserve" text-anchor="middle" x="1838.04" y="-1037.85" font-family="Helvetica,sans-Serif" font-size="9.00">severity &lt; 0.7</text>
<text xml:space="preserve" text-anchor="middle" x="1838.04" y="-1028.1" font-family="Helvetica,sans-Serif" font-size="9.00">classify</text>
</g>
<!-- house_bot&#45;&gt;openai_gpt5 -->
<g id="edge36" class="edge">
<title>house_bot&#45;&gt;openai_gpt5</title>
<path fill="none" stroke="#ff0000" d="M1497.77,-761.46C1562.86,-827.93 1670,-937.35 1670,-937.35 1670,-937.35 1906,-947.85 1906,-947.85 1906,-947.85 1930.54,-972.62 1953.56,-995.84"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1951,-998.24 1960.53,-1002.88 1955.97,-993.31 1951,-998.24"/>
<text xml:space="preserve" text-anchor="middle" x="1697" y="-855.65" font-family="Helvetica,sans-Serif" font-size="9.00">severity &gt; 0.7</text>
<text xml:space="preserve" text-anchor="middle" x="1697" y="-845.9" font-family="Helvetica,sans-Serif" font-size="9.00">synthesize</text>
</g>
<!-- house_bot&#45;&gt;agent_listener -->
<g id="edge44" class="edge">
<title>house_bot&#45;&gt;agent_listener</title>
<path fill="none" stroke="#8b008b" stroke-dasharray="5,2" d="M1382,-761.45C1288.78,-830.75 1131.25,-947.85 1131.25,-947.85 1131.25,-947.85 1131.25,-1125.45 1131.25,-1125.45 1131.25,-1125.45 1183,-1160.45 1183,-1160.45 1183,-1160.45 1183,-1257.25 1183,-1257.25 1183,-1257.25 1127.36,-1288.86 1076.61,-1317.69"/>
<polygon fill="#8b008b" stroke="#8b008b" points="1075.16,-1314.49 1068.2,-1322.47 1078.62,-1320.57 1075.16,-1314.49"/>
<text xml:space="preserve" text-anchor="middle" x="1155.62" y="-1032.98" font-family="Helvetica,sans-Serif" font-size="9.00">AI response</text>
</g>
<!-- tool_router -->
<g id="node17" class="node">
<title>tool_router</title>
<polygon fill="#da70d6" stroke="black" points="1587.03,-545.6 1468.97,-545.6 1468.97,-444.8 1587.03,-444.8 1587.03,-545.6"/>
<text xml:space="preserve" text-anchor="middle" x="1528" y="-520.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">ToolRouter</text>
<text xml:space="preserve" text-anchor="middle" x="1528" y="-508.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">tools/router.py</text>
<text xml:space="preserve" text-anchor="middle" x="1528" y="-496.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Tool registry</text>
<text xml:space="preserve" text-anchor="middle" x="1528" y="-484.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Timeout handling</text>
<text xml:space="preserve" text-anchor="middle" x="1528" y="-472.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Error recovery</text>
<text xml:space="preserve" text-anchor="middle" x="1528" y="-460.75" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• get_catalog()</text>
</g>
<!-- house_bot&#45;&gt;tool_router -->
<g id="edge25" class="edge">
<title>house_bot&#45;&gt;tool_router</title>
<path fill="none" stroke="#8b008b" d="M1467.42,-659.87C1478.81,-629.11 1493.5,-589.41 1505.57,-556.81"/>
<polygon fill="#8b008b" stroke="#8b008b" points="1508.83,-558.07 1509.02,-547.47 1502.27,-555.64 1508.83,-558.07"/>
<text xml:space="preserve" text-anchor="middle" x="1510.13" y="-608.7" font-family="Helvetica,sans-Serif" font-size="9.00">tool request</text>
</g>
<!-- house_bot&#45;&gt;semantic_memory -->
<g id="edge55" class="edge">
<title>house_bot&#45;&gt;semantic_memory</title>
<path fill="none" stroke="#8b008b" stroke-dasharray="5,2" d="M1386.41,-659.75C1380.7,-655.2 1377,-652.25 1377,-652.25 1377,-652.25 1254,-607.5 1254,-607.5 1254,-607.5 1139,-597 1139,-597 1139,-597 1009.86,-553.75 920.75,-523.91"/>
<polygon fill="#8b008b" stroke="#8b008b" points="922.13,-520.68 911.53,-520.82 919.9,-527.32 922.13,-520.68"/>
<text xml:space="preserve" text-anchor="middle" x="1310.94" y="-608.7" font-family="Helvetica,sans-Serif" font-size="9.00">store response</text>
</g>
<!-- tool_router&#45;&gt;house_bot -->
<g id="edge34" class="edge">
<title>tool_router&#45;&gt;house_bot</title>
<path fill="none" stroke="#da70d6" stroke-dasharray="5,2" d="M1513.25,-545.78C1503.31,-579.21 1492,-617.25 1492,-617.25 1492,-617.25 1485.1,-632.07 1476.84,-649.83"/>
<polygon fill="#da70d6" stroke="#da70d6" points="1473.82,-648.02 1472.77,-658.56 1480.17,-650.97 1473.82,-648.02"/>
<text xml:space="preserve" text-anchor="middle" x="1516.59" y="-608.7" font-family="Helvetica,sans-Serif" font-size="9.00">tool results</text>
</g>
<!-- floor_plan_tool -->
<g id="node18" class="node">
<title>floor_plan_tool</title>
<polygon fill="#9370db" stroke="black" points="1582.28,-324.15 1441.72,-324.15 1441.72,-247.35 1582.28,-247.35 1582.28,-324.15"/>
<text xml:space="preserve" text-anchor="middle" x="1512" y="-299.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">FloorPlanTool</text>
<text xml:space="preserve" text-anchor="middle" x="1512" y="-287.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">tools/floor_plan_tool.py</text>
<text xml:space="preserve" text-anchor="middle" x="1512" y="-275.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• adjacent_zones query</text>
<text xml:space="preserve" text-anchor="middle" x="1512" y="-263.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• zone_info query</text>
</g>
<!-- tool_router&#45;&gt;floor_plan_tool -->
<g id="edge26" class="edge">
<title>tool_router&#45;&gt;floor_plan_tool</title>
<path fill="none" stroke="#da70d6" d="M1524.17,-444.51C1521.62,-411.49 1518.29,-368.32 1515.76,-335.49"/>
<polygon fill="#da70d6" stroke="#da70d6" points="1519.27,-335.55 1515.02,-325.85 1512.3,-336.09 1519.27,-335.55"/>
<text xml:space="preserve" text-anchor="middle" x="1535.17" y="-374.35" font-family="Helvetica,sans-Serif" font-size="9.00">execute</text>
</g>
<!-- tool_router&#45;&gt;camera_tool -->
<g id="edge27" class="edge">
<title>tool_router&#45;&gt;camera_tool</title>
<path fill="none" stroke="#da70d6" d="M1572.79,-444.51C1601.56,-412.6 1638.85,-371.22 1668.03,-338.85"/>
<polygon fill="#da70d6" stroke="#da70d6" points="1670.54,-341.3 1674.64,-331.53 1665.34,-336.61 1670.54,-341.3"/>
<text xml:space="preserve" text-anchor="middle" x="1648.82" y="-374.35" font-family="Helvetica,sans-Serif" font-size="9.00">execute</text>
</g>
<!-- floor_plan_tool&#45;&gt;floor_plan -->
<g id="edge28" class="edge">
<title>floor_plan_tool&#45;&gt;floor_plan</title>
<path fill="none" stroke="#9370db" d="M1457.44,-246.85C1446.35,-239.15 1438,-233.35 1438,-233.35 1438,-233.35 1164.68,-151 1020.99,-107.71"/>
<polygon fill="#9370db" stroke="#9370db" points="1022.07,-104.38 1011.48,-104.84 1020.05,-111.08 1022.07,-104.38"/>
<text xml:space="preserve" text-anchor="middle" x="1341.57" y="-189.8" font-family="Helvetica,sans-Serif" font-size="9.00">query zones</text>
</g>
<!-- camera_tool&#45;&gt;cameras -->
<g id="edge30" class="edge">
<title>camera_tool&#45;&gt;cameras</title>
<path fill="none" stroke="#ff1493" d="M1746.93,-330.33C1775.04,-368.69 1815.43,-423.82 1841.45,-459.32"/>
<polygon fill="#ff1493" stroke="#ff1493" points="1838.43,-461.13 1847.16,-467.12 1844.07,-456.99 1838.43,-461.13"/>
<text xml:space="preserve" text-anchor="middle" x="1810.4" y="-374.35" font-family="Helvetica,sans-Serif" font-size="9.00">RTSP capture</text>
</g>
<!-- camera_tool&#45;&gt;openai_vision -->
<g id="edge32" class="edge">
<title>camera_tool&#45;&gt;openai_vision</title>
<path fill="none" stroke="#ff1493" d="M1790.6,-322.64C1840.61,-346.38 1897,-373.15 1897,-373.15 1897,-373.15 2003,-425.9 2003,-425.9 2003,-425.9 2015.29,-439.22 2029.01,-454.1"/>
<polygon fill="#ff1493" stroke="#ff1493" points="2026.33,-456.36 2035.69,-461.34 2031.48,-451.61 2026.33,-456.36"/>
<text xml:space="preserve" text-anchor="middle" x="1950.77" y="-374.35" font-family="Helvetica,sans-Serif" font-size="9.00">analyze snapshot</text>
</g>
<!-- camera_topic -->
<g id="node31" class="node">
<title>camera_topic</title>
<polygon fill="#ff1493" stroke="black" points="400.72,-145.6 191.18,-145.6 137.28,-16 346.82,-16 400.72,-145.6"/>
<text xml:space="preserve" text-anchor="middle" x="269" y="-88.35" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">MQTT Topic</text>
<text xml:space="preserve" text-anchor="middle" x="269" y="-76.35" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">office/.../camera/{id}</text>
<text xml:space="preserve" text-anchor="middle" x="269" y="-64.35" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">(Camera snapshots)</text>
</g>
<!-- camera_tool&#45;&gt;camera_topic -->
<g id="edge51" class="edge">
<title>camera_tool&#45;&gt;camera_topic</title>
<path fill="none" stroke="#ff1493" d="M1658.44,-240.9C1625.74,-215.54 1591,-188.6 1591,-188.6 1591,-188.6 744,-145.6 744,-145.6 744,-145.6 532.98,-117.26 392.24,-98.35"/>
<polygon fill="#ff1493" stroke="#ff1493" points="392.84,-94.9 382.47,-97.04 391.91,-101.84 392.84,-94.9"/>
<text xml:space="preserve" text-anchor="middle" x="1634.61" y="-189.8" font-family="Helvetica,sans-Serif" font-size="9.00">publish analysis</text>
</g>
<!-- floor_plan&#45;&gt;situation_builder -->
<g id="edge14" class="edge">
<title>floor_plan&#45;&gt;situation_builder</title>
<path fill="none" stroke="#daa520" stroke-dasharray="5,2" d="M1010.24,-115.01C1081.28,-146.36 1177,-188.6 1177,-188.6 1177,-188.6 1211,-284.75 1211,-284.75 119,-8 119,-8 1211,-613.38 1211,-613.38 1177,-761.05 1177,-761.05 1177,-761.05 1096,-796.05 1096,-796.05 1096,-796.05 1095.39,-796.46 1094.28,-797.22"/>
<polygon fill="#daa520" stroke="#daa520" points="1092.55,-794.17 1086.27,-802.7 1096.5,-799.95 1092.55,-794.17"/>
<text xml:space="preserve" text-anchor="middle" x="1232" y="-491.52" font-family="Helvetica,sans-Serif" font-size="9.00">adjacency</text>
</g>
<!-- floor_plan&#45;&gt;floor_plan_tool -->
<g id="edge29" class="edge">
<title>floor_plan&#45;&gt;floor_plan_tool</title>
<path fill="none" stroke="#9370db" stroke-dasharray="5,2" d="M1010.11,-98.14C1147.65,-128.05 1426,-188.6 1426,-188.6 1426,-188.6 1448.73,-214.02 1470.82,-238.71"/>
<polygon fill="#9370db" stroke="#9370db" points="1467.97,-240.78 1477.25,-245.9 1473.19,-236.11 1467.97,-240.78"/>
<text xml:space="preserve" text-anchor="middle" x="1453.61" y="-189.8" font-family="Helvetica,sans-Serif" font-size="9.00">zone data</text>
</g>
<!-- semantic_memory&#45;&gt;agent_listener -->
<g id="edge19" class="edge">
<title>semantic_memory&#45;&gt;agent_listener</title>
<path fill="none" stroke="#4682b4" stroke-dasharray="5,2" d="M850.42,-564.84C880.64,-731.93 957.59,-1157.24 985.06,-1309.11"/>
<polygon fill="#4682b4" stroke="#4682b4" points="981.61,-1309.71 986.84,-1318.93 988.5,-1308.47 981.61,-1309.71"/>
<text xml:space="preserve" text-anchor="middle" x="947.62" y="-850.78" font-family="Helvetica,sans-Serif" font-size="9.00">relevant history</text>
</g>
<!-- chromadb -->
<g id="node22" class="node">
<title>chromadb</title>
<path fill="#1e90ff" stroke="black" d="M912.4,-315.45C912.4,-319.09 892.5,-322.05 868,-322.05 843.5,-322.05 823.6,-319.09 823.6,-315.45 823.6,-315.45 823.6,-256.05 823.6,-256.05 823.6,-252.41 843.5,-249.45 868,-249.45 892.5,-249.45 912.4,-252.41 912.4,-256.05 912.4,-256.05 912.4,-315.45 912.4,-315.45"/>
<path fill="none" stroke="black" d="M912.4,-315.45C912.4,-311.81 892.5,-308.85 868,-308.85 843.5,-308.85 823.6,-311.81 823.6,-315.45"/>
<text xml:space="preserve" text-anchor="middle" x="868" y="-287.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">ChromaDB</text>
<text xml:space="preserve" text-anchor="middle" x="868" y="-275.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">Vector Store</text>
</g>
<!-- semantic_memory&#45;&gt;chromadb -->
<g id="edge17" class="edge">
<title>semantic_memory&#45;&gt;chromadb</title>
<path fill="none" stroke="#1e90ff" d="M871.89,-425.61C883.21,-402.71 893,-382.9 893,-382.9 893,-382.9 893,-373.15 893,-373.15 893,-373.15 887.4,-353.78 881.49,-333.38"/>
<polygon fill="#1e90ff" stroke="#1e90ff" points="884.88,-332.48 878.73,-323.84 878.15,-334.42 884.88,-332.48"/>
<text xml:space="preserve" text-anchor="middle" x="920.38" y="-374.35" font-family="Helvetica,sans-Serif" font-size="9.00">vector search</text>
</g>
<!-- chromadb&#45;&gt;semantic_memory -->
<g id="edge18" class="edge">
<title>chromadb&#45;&gt;semantic_memory</title>
<path fill="none" stroke="#1e90ff" stroke-dasharray="5,2" d="M862.83,-322.48C859.18,-347.74 854.14,-382.61 849.55,-414.34"/>
<polygon fill="#1e90ff" stroke="#1e90ff" points="846.13,-413.51 848.16,-423.91 853.06,-414.52 846.13,-413.51"/>
<text xml:space="preserve" text-anchor="middle" x="888.92" y="-374.35" font-family="Helvetica,sans-Serif" font-size="9.00">similar situations</text>
</g>
<!-- prompts -->
<g id="node23" class="node">
<title>prompts</title>
<polygon fill="#708090" stroke="black" points="2647.9,-1081.05 2644.9,-1085.05 2623.9,-1085.05 2620.9,-1081.05 2496.1,-1081.05 2496.1,-992.25 2647.9,-992.25 2647.9,-1081.05"/>
<text xml:space="preserve" text-anchor="middle" x="2572" y="-1056.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">Prompts Directory</text>
<text xml:space="preserve" text-anchor="middle" x="2572" y="-1044.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• housebot_system.txt</text>
<text xml:space="preserve" text-anchor="middle" x="2572" y="-1032.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• housebot_human.txt</text>
<text xml:space="preserve" text-anchor="middle" x="2572" y="-1020.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• should_respond_filter.txt</text>
<text xml:space="preserve" text-anchor="middle" x="2572" y="-1008.2" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• camera_vision.txt</text>
</g>
<!-- prompts&#45;&gt;house_bot -->
<g id="edge39" class="edge">
<title>prompts&#45;&gt;house_bot</title>
<path fill="none" stroke="#708090" stroke-dasharray="1,5" d="M2538.83,-991.98C2486.33,-922.87 2390,-796.05 2390,-796.05 2390,-796.05 1755.57,-739.15 1528.58,-718.79"/>
<polygon fill="#708090" stroke="#708090" points="1529.21,-715.33 1518.94,-717.92 1528.59,-722.3 1529.21,-715.33"/>
<text xml:space="preserve" text-anchor="middle" x="2523.93" y="-850.78" font-family="Helvetica,sans-Serif" font-size="9.00">load prompts</text>
</g>
<!-- prompts&#45;&gt;camera_tool -->
<g id="edge40" class="edge">
<title>prompts&#45;&gt;camera_tool</title>
<path fill="none" stroke="#708090" stroke-dasharray="1,5" d="M2567.84,-991.93C2553.8,-844.25 2509,-373.15 2509,-373.15 2509,-373.15 2007.74,-318.6 1801.77,-296.19"/>
<polygon fill="#708090" stroke="#708090" points="1802.24,-292.72 1791.92,-295.12 1801.48,-299.68 1802.24,-292.72"/>
<text xml:space="preserve" text-anchor="middle" x="2559.25" y="-608.7" font-family="Helvetica,sans-Serif" font-size="9.00">vision prompt</text>
</g>
<!-- floor_plan_json -->
<g id="node24" class="node">
<title>floor_plan_json</title>
<polygon fill="#a9a9a9" stroke="black" points="2612.28,-330.15 2495.72,-330.15 2495.72,-241.35 2618.28,-241.35 2618.28,-324.15 2612.28,-330.15"/>
<polyline fill="none" stroke="black" points="2612.28,-330.15 2612.28,-324.15"/>
<polyline fill="none" stroke="black" points="2618.28,-324.15 2612.28,-324.15"/>
<text xml:space="preserve" text-anchor="middle" x="2557" y="-305.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">floor_plan.json</text>
<text xml:space="preserve" text-anchor="middle" x="2557" y="-293.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Zone polygons</text>
<text xml:space="preserve" text-anchor="middle" x="2557" y="-281.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Sensor placement</text>
<text xml:space="preserve" text-anchor="middle" x="2557" y="-269.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Camera FOVs</text>
<text xml:space="preserve" text-anchor="middle" x="2557" y="-257.3" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Adjacency rules</text>
</g>
<!-- floor_plan_json&#45;&gt;floor_plan -->
<g id="edge41" class="edge">
<title>floor_plan_json&#45;&gt;floor_plan</title>
<path fill="none" stroke="#a9a9a9" stroke-dasharray="1,5" d="M2501.59,-240.93C2495.81,-236.36 2492,-233.35 2492,-233.35 2492,-233.35 1348.4,-122.04 1021.38,-90.21"/>
<polygon fill="#a9a9a9" stroke="#a9a9a9" points="1021.9,-86.74 1011.6,-89.26 1021.22,-93.71 1021.9,-86.74"/>
<text xml:space="preserve" text-anchor="middle" x="2138.23" y="-189.8" font-family="Helvetica,sans-Serif" font-size="9.00">load config</text>
</g>
<!-- env_config -->
<g id="node25" class="node">
<title>env_config</title>
<polygon fill="#696969" stroke="black" points="2606.28,-2063 2495.72,-2063 2495.72,-1974.2 2612.28,-1974.2 2612.28,-2057 2606.28,-2063"/>
<polyline fill="none" stroke="black" points="2606.28,-2063 2606.28,-2057"/>
<polyline fill="none" stroke="black" points="2612.28,-2057 2606.28,-2057"/>
<text xml:space="preserve" text-anchor="middle" x="2554" y="-2038.15" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">.env Configuration</text>
<text xml:space="preserve" text-anchor="middle" x="2554" y="-2026.15" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• MQTT settings</text>
<text xml:space="preserve" text-anchor="middle" x="2554" y="-2014.15" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• OpenAI models</text>
<text xml:space="preserve" text-anchor="middle" x="2554" y="-2002.15" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Feature flags</text>
<text xml:space="preserve" text-anchor="middle" x="2554" y="-1990.15" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Thresholds</text>
</g>
<!-- env_config&#45;&gt;collector -->
<g id="edge42" class="edge">
<title>env_config&#45;&gt;collector</title>
<path fill="none" stroke="#696969" stroke-dasharray="1,5" d="M2495.46,-1983.06C2437.7,-1948.98 2358,-1901.95 2358,-1901.95 2358,-1901.95 533,-1893.95 533,-1893.95 533,-1893.95 484,-1859.68 441.1,-1829.68"/>
<polygon fill="#696969" stroke="#696969" points="443.22,-1826.89 433.02,-1824.03 439.21,-1832.63 443.22,-1826.89"/>
<text xml:space="preserve" text-anchor="middle" x="2431.24" y="-1912.9" font-family="Helvetica,sans-Serif" font-size="9.00">MQTT config</text>
</g>
<!-- env_config&#45;&gt;house_bot -->
<g id="edge43" class="edge">
<title>env_config&#45;&gt;house_bot</title>
<path fill="none" stroke="#696969" stroke-dasharray="1,5" d="M2550.27,-1973.94C2539.99,-1853.53 2512,-1525.6 2512,-1525.6 2512,-1525.6 2484,-1472.85 2484,-1472.85 2484,-1472.85 2186,-947.85 2186,-947.85 2186,-947.85 1734,-796.05 1734,-796.05 1734,-796.05 1612.47,-760.06 1528.13,-735.08"/>
<polygon fill="#696969" stroke="#696969" points="1529.3,-731.78 1518.72,-732.3 1527.31,-738.49 1529.3,-731.78"/>
<text xml:space="preserve" text-anchor="middle" x="2521.32" y="-1474.05" font-family="Helvetica,sans-Serif" font-size="9.00">model selection</text>
</g>
<!-- dashboard_ui -->
<g id="node27" class="node">
<title>dashboard_ui</title>
<polygon fill="#00fa9a" stroke="black" points="2454.78,-1638.4 2269.22,-1638.4 2269.22,-1525.6 2454.78,-1525.6 2454.78,-1638.4"/>
<text xml:space="preserve" text-anchor="middle" x="2362" y="-1613.55" font-family="Helvetica,sans-Serif" font-size="11.00">Dashboard UI</text>
<text xml:space="preserve" text-anchor="middle" x="2362" y="-1601.55" font-family="Helvetica,sans-Serif" font-size="11.00">templates/dashboard.html</text>
<text xml:space="preserve" text-anchor="middle" x="2362" y="-1589.55" font-family="Helvetica,sans-Serif" font-size="11.00">• GlaDOS Responses (Magenta)</text>
<text xml:space="preserve" text-anchor="middle" x="2362" y="-1577.55" font-family="Helvetica,sans-Serif" font-size="11.00">• Situations (Cyan)</text>
<text xml:space="preserve" text-anchor="middle" x="2362" y="-1565.55" font-family="Helvetica,sans-Serif" font-size="11.00">• Sensors (Yellow)</text>
<text xml:space="preserve" text-anchor="middle" x="2362" y="-1553.55" font-family="Helvetica,sans-Serif" font-size="11.00">• Cameras (Purple)</text>
<text xml:space="preserve" text-anchor="middle" x="2362" y="-1541.55" font-family="Helvetica,sans-Serif" font-size="11.00">• All Events (Green)</text>
</g>
<!-- web_dashboard&#45;&gt;dashboard_ui -->
<g id="edge48" class="edge">
<title>web_dashboard&#45;&gt;dashboard_ui</title>
<path fill="none" stroke="#00fa9a" stroke-width="2" d="M2356.74,-1733.72C2357.61,-1708.89 2358.67,-1678.49 2359.61,-1651.51"/>
<polygon fill="#00fa9a" stroke="#00fa9a" stroke-width="2" points="2363.1,-1651.73 2359.95,-1641.61 2356.11,-1651.48 2363.1,-1651.73"/>
<text xml:space="preserve" text-anchor="middle" x="2382.5" y="-1682.6" font-family="Helvetica,sans-Serif" font-size="9.00">SSE stream</text>
</g>
<!-- camera_handler -->
<g id="node28" class="node">
<title>camera_handler</title>
<polygon fill="#ff1493" stroke="black" points="2472.28,-1257.25 2265.72,-1257.25 2265.72,-1168.45 2472.28,-1168.45 2472.28,-1257.25"/>
<text xml:space="preserve" text-anchor="middle" x="2369" y="-1232.4" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">CameraRequestHandler</text>
<text xml:space="preserve" text-anchor="middle" x="2369" y="-1220.4" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">handlers/camera_request_handler.py</text>
<text xml:space="preserve" text-anchor="middle" x="2369" y="-1208.4" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Manual camera triggers</text>
<text xml:space="preserve" text-anchor="middle" x="2369" y="-1196.4" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• Vision analysis</text>
<text xml:space="preserve" text-anchor="middle" x="2369" y="-1184.4" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">• MQTT publishing</text>
</g>
<!-- dashboard_ui&#45;&gt;camera_handler -->
<g id="edge49" class="edge">
<title>dashboard_ui&#45;&gt;camera_handler</title>
<path fill="none" stroke="#ff1493" d="M2363.06,-1525.24C2364.38,-1455.93 2366.63,-1338.36 2367.94,-1269.23"/>
<polygon fill="#ff1493" stroke="#ff1493" points="2371.44,-1269.31 2368.13,-1259.25 2364.44,-1269.18 2371.44,-1269.31"/>
<text xml:space="preserve" text-anchor="middle" x="2395.92" y="-1474.05" font-family="Helvetica,sans-Serif" font-size="9.00">manual capture</text>
</g>
<!-- camera_handler&#45;&gt;camera_tool -->
<g id="edge50" class="edge">
<title>camera_handler&#45;&gt;camera_tool</title>
<path fill="none" stroke="#ff1493" d="M2367.04,-1168.15C2362.77,-1072.98 2353,-855.45 2353,-855.45 119,-8 119,-8 2353,-494.2 2353,-494.2 2319,-373.15 2319,-373.15 2319,-373.15 1968.92,-323.07 1801.8,-299.17"/>
<polygon fill="#ff1493" stroke="#ff1493" points="1802.47,-295.73 1792.08,-297.78 1801.48,-302.66 1802.47,-295.73"/>
<text xml:space="preserve" text-anchor="middle" x="2386" y="-706.98" font-family="Helvetica,sans-Serif" font-size="9.00">trigger snapshot</text>
</g>
<!-- camera_topic&#45;&gt;mqtt_broker -->
<g id="edge52" class="edge">
<title>camera_topic&#45;&gt;mqtt_broker</title>
<path fill="none" stroke="#ff1493" d="M189.38,-141.87C110.06,-201.71 0,-284.75 0,-284.75 119,-8 119,-8 0,-1785.55 0,-1785.55 284,-1893.95 284,-1893.95 284,-1893.95 616,-1931.2 616,-1931.2 616,-1931.2 1626.16,-1997.02 1883.11,-2013.76"/>
<polygon fill="#ff1493" stroke="#ff1493" points="1882.7,-2017.24 1892.91,-2014.4 1883.15,-2010.26 1882.7,-2017.24"/>
<text xml:space="preserve" text-anchor="middle" x="15" y="-1032.98" font-family="Helvetica,sans-Serif" font-size="9.00">publish</text>
</g>
<!-- legend_data -->
<g id="node32" class="node">
<title>legend_data</title>
<text xml:space="preserve" text-anchor="middle" x="2271" y="-2180.7" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">Data Flow</text>
</g>
<!-- legend_config -->
<g id="node33" class="node">
<title>legend_config</title>
<text xml:space="preserve" text-anchor="middle" x="2472" y="-2180.7" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">Configuration</text>
</g>
<!-- legend_data&#45;&gt;legend_config -->
<!-- legend_sync -->
<g id="node34" class="node">
<title>legend_sync</title>
<text xml:space="preserve" text-anchor="middle" x="2691" y="-2180.7" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">Synchronous Call</text>
</g>
<!-- legend_config&#45;&gt;legend_sync -->
<!-- legend_async -->
<g id="node35" class="node">
<title>legend_async</title>
<text xml:space="preserve" text-anchor="middle" x="2938" y="-2180.7" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">Asynchronous/Response</text>
</g>
<!-- legend_sync&#45;&gt;legend_async -->
<!-- legend_skip -->
<g id="node36" class="node">
<title>legend_skip</title>
<text xml:space="preserve" text-anchor="middle" x="3181" y="-2180.7" font-family="Helvetica,sans-Serif" font-size="11.00" fill="white">Conditional Skip</text>
</g>
<!-- legend_async&#45;&gt;legend_skip -->
</g>
</svg>
